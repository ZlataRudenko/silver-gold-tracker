{% extends "base.html" %}
{% block content %}
<div class="wrap">
  <div class="header">
    <div>
      <h1 class="title">{{ t("page.listing.title") }}</h1>
      <p class="subtitle">{{ t("page.listing.subtitle") }}</p>
    </div>
  </div>

  {% if error %}
    <div class="alert">{{ error }}</div>
  {% endif %}

  {% if listing %}
    <div class="card">
      <div class="row">
        <div class="badge">{% if listing.type == "sell" %}{{ t("side.sell") }}{% else %}{{ t("side.buy") }}{% endif %}</div>
        <div class="badge">{% if listing.metal == "silver" %}{{ t("metal.silver") }}{% else %}{{ t("metal.gold") }}{% endif %}</div>
      </div>

      <h2 class="big">
        {{ "%.2f"|format(listing.amount) }}
        {% if listing.unit == "g" %}{{ t("unit.g") }}
        {% elif listing.unit == "kg" %}{{ t("unit.kg") }}
        {% elif listing.unit == "oz" %}{{ t("unit.oz") }}
        {% else %}{{ t("unit.don") }}
        {% endif %}
      </h2>

      <div class="muted">{{ t("common.alias") }}: {{ listing.alias }}</div>
      <div class="muted">{{ t("common.purity") }}: {{ listing.purity or "-" }}</div>
      <div class="muted">{{ t("common.location") }}: {{ listing.location or "-" }}</div>

      {% if listing.message %}
        <hr />
        <div class="muted">{{ t("page.listing.message_label") }}</div>
        <div>{{ listing.message }}</div>
      {% endif %}

      <hr />

      <div class="row">
        <a class="btn" href="/marketplace">‚Üê {{ t("btn.back") }}</a>

        <form method="post" action="/listing/{{ listing.id }}/contact" style="margin:0;">
          <button type="submit">{{ t("btn.contact") }}</button>
        </form>
      </div>
    </div>
  {% endif %}
</div>
{% endblock %}
