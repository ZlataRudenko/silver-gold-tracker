{% extends "base.html" %}
{% block content %}
<div class="wrap">

  <div class="header">
    <div>
      <h1 class="title">{{ t("nav.marketplace") }}</h1>
      <p class="subtitle">
        {{ t("page.marketplace.subtitle") }}
      </p>

    </div>
    <a href="/post" class="pill" style="text-decoration:none;">
      <span>{{ t("btn.post_request") }}</span>
    </a>
  </div>

  {% if listings|length == 0 %}
  <div class="card">
    <p class="subtitle">{{ t("page.marketplace.empty") }}</p>
  </div>
  {% endif %}

  <div class="grid">
    {% for x in listings %}
    <div class="card">
      <div class="label">
        <div class="metal">
          <span class="icon">{{ "S" if x.type=="sell" else "B" }}</span>
          <span>{% if x.type == "sell" %}{{ t("side.sell") }}{% else %}{{ t("side.buy") }}{% endif %}</span>
        </div>
        <span class="badge">{% if x.metal == "silver" %}{{ t("metal.silver") }}{% else %}{{ t("metal.gold") }}{% endif
          %}</span>
      </div>

      <p class="value mono" style="font-size:22px;">
        {{ x.amount }}
        {% if x.unit == "g" %}{{ t("unit.g") }}
        {% elif x.unit == "kg" %}{{ t("unit.kg") }}
        {% elif x.unit == "oz" %}{{ t("unit.oz") }}
        {% else %}{{ t("unit.don") }}
        {% endif %}
      </p>
      <div class="unit">
        {{ t("common.alias") }}: <strong class="mono">{{ x.alias }}</strong>
        {% if x.location %} Â· {{ x.location }}{% endif %}
      </div>

      <div class="meta">
        <span>{{ t("common.purity") }}: <strong class="mono">{{ x.purity if x.purity else "-" }}</strong></span>
        <span>{{ t("common.posted") }}: <strong class="mono">{{ x.created_at }}</strong></span>
      </div>

      <div style="margin-top:12px;">
        <a href="/listing/{{ x.id }}">{{ t("common.open") }}</a>
      </div>
    </div>
    {% endfor %}
  </div>

</div>
{% endblock %}